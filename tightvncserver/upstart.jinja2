# {{ pillar['message_do_not_modify'] }}
# upstart script for Tightvncserver

start on runlevel [2345]
stop on runlevel [!2345]

nice 10
respawn

setuid {{ user }}
env HOME="{{ home }}"
env USER="{{ user }}"

post-start script
  exec /usr/bin/vncserver -depth 16 -geometry {{ salt['pillar.get']('tightvncserver:resolution', '1024x768') }} :1
  emit tightvncserver_running
end script

post-stop script
  /usr/bin/vncserver -kill :1
end script

