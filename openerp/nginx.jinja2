{#- Usage of this is governed by a license that can be found in doc/license.rst -#}

# {{ salt['pillar.get']('message_do_not_modify') }}

{% extends "nginx/template.jinja2" %}
{%- block upstream %}
upstream openerp {
    server unix:///var/lib/uwsgi/openerp.sock;
}
{%- endblock %}

{%- block root_location -%}
    client_max_body_size {{ salt['pillar.get']('openerp:max_upload_file_size', 1) }}m;

{%- set timeout = salt['pillar.get']('openerp:timeout', 60) %}
    location / {
        uwsgi_pass openerp;
        include uwsgi_params;
        uwsgi_read_timeout {{ timeout }};
        uwsgi_send_timeout {{ timeout }};
    }
{%- endblock %}
